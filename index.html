<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Las Aventuras de Coco y Mango</title>
  <!-- Meta Tag for Mobile Responsiveness -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Tailwind CSS CDN -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- React and ReactDOM CDN -->
  <script src="https://unpkg.com/react@18/umd/react.development.js" crossorigin></script>
  <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js" crossorigin></script>
  <!-- Babel for JSX -->
  <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>
  <style>
    /* Custom Fonts */
    @import url('https://fonts.googleapis.com/css2?family=Comic+Neue&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Roboto&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Merriweather&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Courier+Prime&display=swap');
    @import url('https://fonts.googleapis.com/css2?family=Roboto+Slab&display=swap');

    .font-sans { font-family: 'Roboto', sans-serif; }
    .font-serif { font-family: 'Merriweather', serif; }
    .font-mono { font-family: 'Courier Prime', monospace; }
    .font-comic { font-family: 'Comic Neue', cursive; }
    .font-rounded { font-family: 'Roboto Slab', serif; }
  </style>
</head>
<body class="bg-gray-100">
  <div id="root"></div>

  <!-- React Component -->
  <script type="text/babel">
    const { useState, useEffect } = React;

    // Replace Card component with a div with Tailwind classes
    const Card = ({ children, className }) => (
      <div className={`bg-white shadow-md rounded-lg ${className}`}>
        {children}
      </div>
    );

    const stories = [
      {
        id: 'la-gran-aventura',
        title: "La Gran Aventura",
        content: [
          "Coco y Mango eran los mejores amigos, dos lagartijitas que vivían en Colima, México. Habían crecido juntos y compartían todos sus secretos. Pero los dos tenían algo en común que los hacía diferentes de las otras lagartijas: creían que eran cocodrilos.",
          "Todos los días soñaban con una vida llena de grandes aventuras y gloria, como los magníficos cocodrilos. Coco y Mango soñaban con nadar en ríos embravecidos y explorar las profundidades de los mares. Así que, una noche, decidieron arriesgarse, dejar su hogar y emprender una gran aventura.",
          "Las dos pequeñas lagartijas dejaron la seguridad de su hogar y viajaron durante días, enfrentando peligros y aventuras en el camino. Pero nada se comparó con el momento en que llegaron al más grandioso de los océanos, el Pacífico.",
          "Se llenaron de emoción cuando se zambulleron en el agua, creyendo que eran los cocodrilos con los que siempre habían soñado ser. Nadaron y jugaron en las olas, maravillándose de su entorno. Retozaron en las cuevas submarinas y buscaron en las profundidades del océano maravillas nunca antes vistas.",
          "Los dos amigos se divirtieron como nunca, pero demasiado pronto tuvieron que regresar a casa. Aunque eran dos lagartijas muy pequeñas, fueron lo suficientemente valientes para aventurarse en una increíble aventura, creyendo que eran las majestuosas criaturas que siempre habían imaginado.",
          "Coco y Mango regresaron a casa con grandes historias que contar y un nuevo aprecio por el poder y la belleza del gran océano."
        ]
      },
      ...Array(11).fill(null).map((_, index) => ({
        id: `historia-${index + 2}`,
        title: `Historia ${index + 2}`,
        content: ["Contenido próximamente..."]
      }))
    ];

    const StoriesPage = () => {
      const [isMenuOpen, setIsMenuOpen] = useState(false);
      const [currentStoryIndex, setCurrentStoryIndex] = useState(-1); // -1 for index page
      const [fontSize, setFontSize] = useState(2);
      const [fontFamily, setFontFamily] = useState(0);
      const [pageStats, setPageStats] = useState({});
      const [readCount, setReadCount] = useState({});

      const fontSizes = ['text-lg', 'text-xl', 'text-2xl', 'text-3xl', 'text-4xl'];
      const fontFamilies = ['font-sans', 'font-serif', 'font-mono', 'font-comic', 'font-rounded'];

      useEffect(() => {
        if (currentStoryIndex >= 0) {
          setPageStats(prev => ({
            ...prev,
            [currentStoryIndex]: (prev[currentStoryIndex] || 0) + 1
          }));
        }
      }, [currentStoryIndex]);

      const adjustFontSize = (increment) => {
        setFontSize(prev => {
          const newSize = prev + (increment ? 1 : -1);
          return Math.min(Math.max(newSize, 0), fontSizes.length - 1);
        });
      };

      const nextFont = () => {
        setFontFamily(prev => (prev + 1) % fontFamilies.length);
      };

      const completeStory = (index) => {
        setReadCount(prev => ({
          ...prev,
          [index]: (prev[index] || 0) + 1
        }));
      };

      const renderIndex = () => (
        <div className="px-4">
          <h1 className="text-4xl font-bold text-center mb-8">Las Aventuras de Coco y Mango</h1>
          <Card className="p-4">
            <div className="space-y-4">
              {stories.map((story, index) => (
                <div
                  key={story.id}
                  onClick={() => setCurrentStoryIndex(index)}
                  className="p-3 border rounded-lg hover:bg-gray-50 cursor-pointer transition-colors"
                >
                  <h2 className="text-lg">{story.title}</h2>
                </div>
              ))}
            </div>
          </Card>
        </div>
      );

      const renderStory = (story, index) => (
        <div className="relative min-h-screen">
          {/* Font Controls */}
          <div className="sticky top-0 z-10 bg-white border-b mb-4">
            <div className="max-w-full mx-auto p-3 flex justify-between items-center pl-12">
              {/* Added pl-12 to create space for the burger menu */}
              <div className="flex items-center gap-2">
                <button 
                  onClick={() => adjustFontSize(false)}
                  className="p-2 hover:bg-gray-100 rounded-full"
                  disabled={fontSize === 0}
                >
                  {/* MinusCircle Icon */}
                  <svg xmlns="http://www.w3.org/2000/svg" className="w-5 h-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M20 12H4" />
                  </svg>
                </button>
                <button 
                  onClick={() => adjustFontSize(true)}
                  className="p-2 hover:bg-gray-100 rounded-full"
                  disabled={fontSize === fontSizes.length - 1}
                >
                  {/* PlusCircle Icon */}
                  <svg xmlns="http://www.w3.org/2000/svg" className="w-5 h-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M12 4v16m8-8H4" />
                  </svg>
                </button>
              </div>
              <button 
                onClick={nextFont}
                className="p-2 hover:bg-gray-100 rounded-full"
                aria-label="Change Font Family"
              >
                {/* Stylized T Icon */}
                <svg xmlns="http://www.w3.org/2000/svg" className="w-5 h-5 text-gray-600" viewBox="0 0 24 24" fill="none" stroke="currentColor">
                  <text x="0" y="20" fontSize="20" fontWeight="bold" fontFamily="Arial, sans-serif">T</text>
                </svg>
              </button>
            </div>
          </div>

          {/* Story Content */}
          <div className="max-w-full mx-auto p-4 pb-16">
            <Card className="p-4">
              <h2 className={`text-2xl font-bold mb-4 text-center ${fontFamilies[fontFamily]}`}>
                {story.title}
              </h2>
              
              <div className="w-full h-40 bg-gray-100 rounded-lg mb-4 flex items-center justify-center">
                <span className="text-gray-400">Ilustración</span>
              </div>
              
              <div className={`space-y-4 leading-relaxed text-justify ${fontSizes[fontSize]} ${fontFamilies[fontFamily]}`}>
                {story.content.map((paragraph, pIndex) => (
                  <p key={pIndex}>{paragraph}</p>
                ))}
              </div>
            </Card>
          </div>

          {/* Navigation Footer */}
          <div className="fixed bottom-0 left-0 right-0 bg-white/95 backdrop-blur-sm border-t shadow-sm">
            <div className="max-w-full mx-auto">
              {/* Top row: Navigation */}
              <div className="flex justify-between items-center p-3 border-b">
                <button 
                  onClick={() => {
                    if (index > 0) {
                      setCurrentStoryIndex(index - 1);
                    }
                  }}
                  className={`p-2 hover:bg-gray-100 rounded-full transition-colors ${index === 0 ? 'opacity-50 cursor-not-allowed' : ''}`}
                  disabled={index === 0}
                  aria-label="Previous Story"
                >
                  {/* ChevronLeft Icon */}
                  <svg xmlns="http://www.w3.org/2000/svg" className="w-6 h-6 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M15 19l-7-7 7-7" />
                  </svg>
                </button>
                
                <div className="text-sm">
                  {index + 1} de {stories.length}
                </div>
                
                <button 
                  onClick={() => {
                    completeStory(index);
                    if (index < stories.length - 1) {
                      setCurrentStoryIndex(index + 1);
                    }
                  }}
                  disabled={index === stories.length - 1}
                  className={`p-2 hover:bg-gray-100 rounded-full transition-colors ${index === stories.length - 1 ? 'opacity-50 cursor-not-allowed' : ''}`}
                  aria-label="Next Story"
                >
                  {/* ChevronRight Icon */}
                  <svg xmlns="http://www.w3.org/2000/svg" className="w-6 h-6 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                    <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M9 5l7 7-7 7" />
                  </svg>
                </button>
              </div>
              
              {/* Bottom row: Stats */}
              <div className="flex justify-center items-center p-2 text-xs text-gray-600">
                <span>Leído {readCount[index] || 0} veces</span>
                <span className="mx-1">•</span>
                <span>Vistas: {pageStats[index] || 0}</span>
              </div>
            </div>
          </div>

          {/* Back to Index Button */}
          <button
            onClick={() => setCurrentStoryIndex(-1)}
            className="fixed right-3 top-3 p-2 bg-white rounded-full shadow-lg hover:bg-gray-100"
            aria-label="Back to Index"
          >
            {/* ArrowUp Icon */}
            <svg xmlns="http://www.w3.org/2000/svg" className="w-5 h-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M5 10l7-7m0 0l7 7m-7-7v18" />
            </svg>
          </button>
        </div>
      );

      // Burger Menu
      const renderBurgerMenu = () => (
        <>
          {/* Burger Button */}
          <button
            onClick={() => setIsMenuOpen(true)}
            className="fixed left-3 top-3 p-2 bg-white hover:bg-gray-100 z-50 flex items-center justify-center h-8 w-8 rounded-full shadow"
            aria-label="Open Menu"
          >
            {/* Menu Icon */}
            <svg xmlns="http://www.w3.org/2000/svg" className="w-5 h-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
              <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M4 6h16M4 12h16M4 18h16" />
            </svg>
          </button>

          {/* Menu Overlay */}
          {isMenuOpen && (
            <div className="fixed inset-0 bg-black bg-opacity-50 z-50" onClick={() => setIsMenuOpen(false)}>
              {/* Menu Content */}
              <div 
                className="fixed inset-y-0 left-0 w-56 bg-white shadow-lg transform transition-transform duration-200 ease-in-out"
                onClick={e => e.stopPropagation()}
              >
                {/* Menu Header */}
                <div className="flex justify-between items-center p-4 border-b">
                  <h3 className="font-bold text-lg">Menú</h3>
                  <button onClick={() => setIsMenuOpen(false)} aria-label="Close Menu">
                    {/* X Icon */}
                    <svg xmlns="http://www.w3.org/2000/svg" className="w-5 h-5 text-gray-600" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                      <path strokeLinecap="round" strokeLinejoin="round" strokeWidth={2} d="M6 18L18 6M6 6l12 12" />
                    </svg>
                  </button>
                </div>

                {/* Menu Items */}
                <div className="p-4 space-y-3 overflow-y-auto h-full">
                  <div
                    onClick={() => {
                      setCurrentStoryIndex(-1);
                      setIsMenuOpen(false);
                    }}
                    className="cursor-pointer hover:text-blue-600 font-semibold"
                  >
                    Índice Principal
                  </div>
                  
                  <div className="h-px bg-gray-200 my-2" />
                  
                  {stories.map((story, index) => (
                    <div
                      key={story.id}
                      onClick={() => {
                        setCurrentStoryIndex(index);
                        setIsMenuOpen(false);
                      }}
                      className={`cursor-pointer hover:text-blue-600 ${
                        currentStoryIndex === index ? 'text-blue-600' : ''
                      }`}
                    >
                      {story.title}
                    </div>
                  ))}
                </div>
              </div>
            </div>
          )}
        </>
      );

      return (
        <div className="min-h-screen">
          {renderBurgerMenu()}
          {currentStoryIndex === -1 
            ? renderIndex()
            : renderStory(stories[currentStoryIndex], currentStoryIndex)
          }
        </div>
      );
    };

    ReactDOM.createRoot(document.getElementById('root')).render(<StoriesPage />);
  </script>
</body>
</html>
